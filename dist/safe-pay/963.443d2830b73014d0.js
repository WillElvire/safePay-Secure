"use strict";(self.webpackChunksafePay=self.webpackChunksafePay||[]).push([[963],{8963:(O,f,o)=>{o.r(f),o.d(f,{RegisterComponent:()=>p});var z=o(727),m=o(6895),r=o(4006),C=o(205),v=o(4969),b=o(1512),Z=o(5368),c=o(8043),e=o(4650),S=o(1102),y=o(3679),F=o(6616),T=o(7044),R=o(1664),h=o(6704),g=o(5635),x=o(9646),V=o(5698),d=o(8231);function A(i,t){if(1&i&&(e.TgZ(0,"nz-option",2),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.s9C("nzLabel",null==n?null:n.name),e.s9C("nzValue",n.dial_code),e.xp6(1),e.AsE(" ",null==n?null:n.name," (",null==n?null:n.dial_code,") ")}}class a{constructor(t){this.AppFacades=t,this.dialCodeChange=new e.vpe,this.countryCode$=(0,x.of)([]),this.country=new r.NI,this.country.valueChanges.subscribe(n=>{if(n)return this.dialCodeChange.emit(n)})}ngOnInit(){this.countryCode$=this.AppFacades.getCoutryDialCode().pipe((0,V.q)(1))}}function I(i,t){if(1&i&&(e.TgZ(0,"nz-option",2),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.s9C("nzLabel",n.name),e.s9C("nzValue",n.id),e.xp6(1),e.hij(" ",n.name," ")}}a.\u0275fac=function(t){return new(t||a)(e.Y36(c.h))},a.\u0275cmp=e.Xpm({type:a,selectors:[["s-country-select"]],inputs:{dialCode:"dialCode"},outputs:{dialCodeChange:"dialCodeChange"},decls:5,vars:4,consts:[["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Votre pays ",3,"formControl"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"]],template:function(t,n){1&t&&(e.TgZ(0,"nz-select",0),e.YNc(1,A,2,4,"nz-option",1),e.ALo(2,"async"),e.qZA(),e._UZ(3,"br")(4,"br")),2&t&&(e.Q6J("formControl",n.country),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n.countryCode$)))},dependencies:[m.sg,r.JJ,r.oH,d.Ip,d.Vq,m.Ov],styles:["nz-select[_ngcontent-%COMP%]{width:100%}nz-option[_ngcontent-%COMP%]{height:10vh!important}"]});class u{constructor(t){this.appFacades=t,this.allRoles=[],this.subcription=new z.w0,this.role=new r.NI,this.userRoleChange=new e.vpe,this.role.valueChanges.subscribe(n=>{if(n)return this.userRoleChange.emit(n)})}ngOnDestroy(){this.subcription.unsubscribe()}ngOnInit(){this.subcription=this.appFacades.getAllRoles().subscribe(t=>{this.allRoles=t.returnObject.filter(s=>"Staff"!=s.name&&"Admin"!=s.name)})}}function J(i,t){if(1&i){const n=e.EpF();e.TgZ(0,"span",24),e.NdJ("click",function(){e.CHM(n);const l=e.oxw();return e.KtG(l.passwordVisible=!l.passwordVisible)}),e.qZA()}if(2&i){const n=e.oxw();e.Q6J("nzType",n.passwordVisible?"eye-invisible":"eye")}}u.\u0275fac=function(t){return new(t||u)(e.Y36(c.h))},u.\u0275cmp=e.Xpm({type:u,selectors:[["s-role-select"]],inputs:{userRole:"userRole"},outputs:{userRoleChange:"userRoleChange"},decls:8,vars:2,consts:[["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Type de profil",3,"formControl"],["nzCustomContent","",3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzCustomContent","",3,"nzLabel","nzValue"]],template:function(t,n){1&t&&(e.TgZ(0,"nz-select",0),e._UZ(1,"br")(2,"br")(3,"br")(4,"br"),e.YNc(5,I,2,3,"nz-option",1),e.qZA(),e._UZ(6,"br")(7,"br")),2&t&&(e.Q6J("formControl",n.role),e.xp6(5),e.Q6J("ngForOf",n.allRoles))},dependencies:[m.sg,r.JJ,r.oH,d.Ip,d.Vq],styles:["nz-select[_ngcontent-%COMP%]{width:100%}"]});class p{constructor(t,n,s){this.fb=t,this.appFacades=n,this.router=s,this.useWeb3=!0,this.passwordVisible=!1,this.countryCode="",this.subscription=new z.w0,this.isSpinned=!1}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.validateForm=this.fb.group({firstname:[null,[r.kI.required]],lastname:[null,[r.kI.required]],phone:[null,[r.kI.required]],countryCode:[null],roleId:[null],email:[null,[r.kI.required,r.kI.email]],password:[null,[r.kI.required,r.kI.minLength(6)]]})}submitForm(){if(this.verifyUserRole())return this.setPhoneValue(),this.valideUserForm()?this.submitUserForm():this.displayErrors()}submitUserForm(){this.isSpinned=!0,this.subscription=this.appFacades.registerUser({...this.validateForm.value,roleId:this.roleId}).subscribe({next:t=>{this.appFacades.mBuildSuccess(t.message),this.router.navigate(["/auth/login"]),this.isSpinned=!1},error:t=>{this.isSpinned=!1,this.appFacades.mBuildError(t.error.message?t.error.message:t.message)}})}setPhoneValue(){return this.countryCode?this.validateForm.get("countryCode")?.setValue(this.countryCode):this.appFacades.mBuildError("Veuillez choisir votre pays de residence")}verifyUserRole(){return!!this.roleId||(this.appFacades.mBuildError("Veuillez choisir le type de compte souhait\xe9"),!1)}valideUserForm(){return this.validateForm.valid}displayErrors(){Object.values(this.validateForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}}p.\u0275fac=function(t){return new(t||p)(e.Y36(r.QS),e.Y36(c.h),e.Y36(C.F0))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-register"]],standalone:!0,features:[e.jDz],decls:33,vars:9,consts:[["nz-form","",1,"mt-5",3,"formGroup","ngSubmit"],["nzErrorTip","Veuillez renseigner votre nom !"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","firstname","placeholder","nom"],["nzErrorTip","Veuillez  renseigner votre prenom !"],["type","text","nz-input","","formControlName","lastname","placeholder","prenom"],[3,"userRole","userRoleChange"],["nzErrorTip","Veuillez renseigner votre email !"],["nzPrefixIcon","mail"],["type","email","nz-input","","formControlName","email","placeholder","email"],[1,"grid"],[1,"row"],[1,"col-md-4"],[3,"dialCode","dialCodeChange"],[1,"col-md-8"],["nzErrorTip","Veuillez renseigner votre numero de telephone"],["nzPrefixIcon","phone"],["type","text","nz-input","","formControlName","phone","placeholder","Numero de telephone"],["nzErrorTip","Veuillez renseigner votre mot de passe!"],["nzPrefixIcon","lock",3,"nzSuffix"],["type","password","nz-input","","formControlName","password","placeholder","Mot de passe",3,"type"],["suffixTemplate",""],["nz-button","",1,"login-form-button","login-form-margin","col-md-12",3,"nzType","nzLoading"],[3,"text","link"],["nz-icon","",3,"nzType","click"]],template:function(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"form",0),e.NdJ("ngSubmit",function(){return n.submitForm()}),e.TgZ(2,"nz-form-item")(3,"nz-form-control",1)(4,"nz-input-group",2),e._UZ(5,"input",3),e.qZA()()(),e.TgZ(6,"nz-form-item")(7,"nz-form-control",4)(8,"nz-input-group",2),e._UZ(9,"input",5),e.qZA()()(),e.TgZ(10,"s-role-select",6),e.NdJ("userRoleChange",function(l){return n.roleId=l}),e.qZA(),e.TgZ(11,"nz-form-item")(12,"nz-form-control",7)(13,"nz-input-group",8),e._UZ(14,"input",9),e.qZA()()(),e.TgZ(15,"div",10)(16,"div",11)(17,"div",12)(18,"s-country-select",13),e.NdJ("dialCodeChange",function(l){return n.countryCode=l}),e.qZA()(),e.TgZ(19,"div",14)(20,"nz-form-item")(21,"nz-form-control",15)(22,"nz-input-group",16),e._UZ(23,"input",17),e.qZA()()()()()(),e.TgZ(24,"nz-form-item")(25,"nz-form-control",18)(26,"nz-input-group",19),e._UZ(27,"input",20),e.qZA(),e.YNc(28,J,1,1,"ng-template",null,21,e.W1O),e.qZA()(),e.TgZ(30,"button",22),e._uU(31,"S'inscrire"),e.qZA()(),e.BQk(),e._UZ(32,"app-form-tool",23)),2&t){const s=e.MAs(29);e.xp6(1),e.Q6J("formGroup",n.validateForm),e.xp6(9),e.Q6J("userRole",n.roleId),e.xp6(8),e.Q6J("dialCode",n.countryCode),e.xp6(8),e.Q6J("nzSuffix",s),e.xp6(1),e.Q6J("type",n.passwordVisible?"text":"password"),e.xp6(3),e.Q6J("nzType","primary")("nzLoading",n.isSpinned),e.xp6(2),e.s9C("text","se connecter"),e.Q6J("link","/auth/login")}},dependencies:[m.ez,Z.l,S.Ls,y.t3,y.SK,F.ix,T.w,R.dQ,h.Lr,h.Nx,h.Fd,g.Zp,g.gB,g.ke,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,C.Bz,v.z,b.D,a,u],styles:["nz-input-group[_ngcontent-%COMP%]{height:6vh}button[_ngcontent-%COMP%]{height:6vh!important;background-color:var(--base-color);color:#000;border:none!important}@media (min-width: 0px) and (max-width: 900px){button[_ngcontent-%COMP%]{width:100%!important;height:auto!important}nz-input-group[_ngcontent-%COMP%]{height:6vh}}"]})}}]);